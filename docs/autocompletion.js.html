<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: autocompletion.js</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="keyword" content="" />
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:url" content=""/>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"JsHelpers","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">JsHelpers</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ActionHelper">
            <span class="title">
                <a href="ActionHelper.html">ActionHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ActionHelper#getInstance"><a href="ActionHelper.html#getInstance">getInstance</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ActionHelper#execute"><a href="ActionHelper.html#execute">execute</a></li>
            
                <li data-name="ActionHelper#redirect"><a href="ActionHelper.html#redirect">redirect</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnalyticsHelper">
            <span class="title">
                <a href="AnalyticsHelper.html">AnalyticsHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="AnalyticsHelper#getInstance"><a href="AnalyticsHelper.html#getInstance">getInstance</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AutocompletionHelper">
            <span class="title">
                <a href="AutocompletionHelper.html">AutocompletionHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AutocompletionHelper#addResult"><a href="AutocompletionHelper.html#addResult">addResult</a></li>
            
                <li data-name="AutocompletionHelper#changeResult"><a href="AutocompletionHelper.html#changeResult">changeResult</a></li>
            
                <li data-name="AutocompletionHelper#init"><a href="AutocompletionHelper.html#init">init</a></li>
            
                <li data-name="AutocompletionHelper#typingTimeout"><a href="AutocompletionHelper.html#typingTimeout">typingTimeout</a></li>
            
                <li data-name="AutocompletionHelper#updateResultContainer"><a href="AutocompletionHelper.html#updateResultContainer">updateResultContainer</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="AutocompletionHelper#event:hideResultContainer"><a href="AutocompletionHelper.html#event:hideResultContainer">hideResultContainer</a></li>
            
                <li data-name="AutocompletionHelper#event:removeSelected"><a href="AutocompletionHelper.html#event:removeSelected">removeSelected</a></li>
            
                <li data-name="AutocompletionHelper#event:selectResult"><a href="AutocompletionHelper.html#event:selectResult">selectResult</a></li>
            
                <li data-name="AutocompletionHelper#event:showResultContainer"><a href="AutocompletionHelper.html#event:showResultContainer">showResultContainer</a></li>
            
                <li data-name="AutocompletionHelper#event:typing"><a href="AutocompletionHelper.html#event:typing">typing</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="JsHelper">
            <span class="title">
                <a href="JsHelper.html">JsHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="JsHelper#addGlobalFunction"><a href="JsHelper.html#addGlobalFunction">addGlobalFunction</a></li>
            
                <li data-name="JsHelper#cloneArray"><a href="JsHelper.html#cloneArray">cloneArray</a></li>
            
                <li data-name="JsHelper#cloneObject"><a href="JsHelper.html#cloneObject">cloneObject</a></li>
            
                <li data-name="JsHelper#extendSingleton"><a href="JsHelper.html#extendSingleton">extendSingleton</a></li>
            
                <li data-name="JsHelper#getSingleton"><a href="JsHelper.html#getSingleton">getSingleton</a></li>
            
                <li data-name="JsHelper#idDefined"><a href="JsHelper.html#idDefined">idDefined</a></li>
            
                <li data-name="JsHelper#ifNull"><a href="JsHelper.html#ifNull">ifNull</a></li>
            
                <li data-name="JsHelper#init"><a href="JsHelper.html#init">init</a></li>
            
                <li data-name="JsHelper#loadCss"><a href="JsHelper.html#loadCss">loadCss</a></li>
            
                <li data-name="JsHelper#ucfirst"><a href="JsHelper.html#ucfirst">ucfirst</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="PaginationHelper">
            <span class="title">
                <a href="PaginationHelper.html">PaginationHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="PaginationHelper#checkNavigation"><a href="PaginationHelper.html#checkNavigation">checkNavigation</a></li>
            
                <li data-name="PaginationHelper#checkRange"><a href="PaginationHelper.html#checkRange">checkRange</a></li>
            
                <li data-name="PaginationHelper#init"><a href="PaginationHelper.html#init">init</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="PaginationHelper#event:updateCurrentpage"><a href="PaginationHelper.html#event:updateCurrentpage">updateCurrentpage</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="PopupHelper">
            <span class="title">
                <a href="PopupHelper.html">PopupHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="PopupHelper#getInstance"><a href="PopupHelper.html#getInstance">getInstance</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="WebsocketHelper">
            <span class="title">
                <a href="WebsocketHelper.html">WebsocketHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="WebsocketHelper#getInstance"><a href="WebsocketHelper.html#getInstance">getInstance</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="WebsocketHelper#addEvent"><a href="WebsocketHelper.html#addEvent">addEvent</a></li>
            
                <li data-name="WebsocketHelper#addEvent"><a href="WebsocketHelper.html#addEvent">addEvent</a></li>
            
                <li data-name="WebsocketHelper#addEvents"><a href="WebsocketHelper.html#addEvents">addEvents</a></li>
            
                <li data-name="WebsocketHelper#init"><a href="WebsocketHelper.html#init">init</a></li>
            
                <li data-name="WebsocketHelper#send"><a href="WebsocketHelper.html#send">send</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="WebsocketHelper#event:connected"><a href="WebsocketHelper.html#event:connected">connected</a></li>
            
                <li data-name="WebsocketHelper#event:disconnect"><a href="WebsocketHelper.html#event:disconnect">disconnect</a></li>
            
                <li data-name="WebsocketHelper#event:disconnected"><a href="WebsocketHelper.html#event:disconnected">disconnected</a></li>
            
                <li data-name="WebsocketHelper#event:error"><a href="WebsocketHelper.html#event:error">error</a></li>
            
                <li data-name="WebsocketHelper#event:recv"><a href="WebsocketHelper.html#event:recv">recv</a></li>
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="autocompletion.js.html">Source: autocompletion.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*global isDefined */
var AutocompletionHelper;
(function(){
    "use strict";
    /**
     * @name AutocompletionHelper
     * @constructor
     * @property {Function}     [find]                      Callback trigger on typing timeout to get data
     * @property {Function}     [select]                    Callback trigger when a result is selected
     * @property {Integer}      [_speedTyping = 250]        Typing speed timeout to send search
     * @property {Integer}      [_fadeTyping = 250]         Result container fade speed
     * @property {String}       [placeholder=""]            Default input text
     * @property {DOMElement}   [container]                 Container to append the input
     * @param    {Object}       [params]                    Object containing DOMElement and cb needed
     */
    AutocompletionHelper = function(params){
        this._typingSpeed = 300;
        this._fadeSpeed = 150;
        this.class = isDefined(params.class) ? params.class : "";
        this.restrict = isDefined(params.restrict) ? params.restrict : false;
        this.placeholder = isDefined(params.placeholder) ? params.placeholder : "";
        this.attr = isDefined(params.attr) ? params.attr : "";
        this.id = isDefined(params.id) ? "id='"+params.id+"'" : "";
        this.container = params.container;
        this.find = params.cbFind;
        this.blur = params.cbBlur;
        this.select = params.cbSelect;
        this.init();
    };

    /** 
     * @description Initialize DOMElement and event needed
     * @method AutocompletionHelper#init
     */
    AutocompletionHelper.prototype.init = function(){
        var that = this;
        var isAvailable = true;
        var isCancel = false;
        var timer;

        /** initialize container with input and result container */
        this.container.append(
            "&lt;div>"+
                "&lt;input autocomplete='off' class='"+this.class+"' "+this.attr+" "+this.id+" type='text' />"+
            "&lt;/div>"+
            "&lt;div class='resultContainer'>&lt;/div>");
        var input = this.container.find("input");
        input.attr("placeholder", this.placeholder);
        var resultContainer = this.container.find(".resultContainer");
        var searchIcon = this.container.find(".icon-search");

        /** assign events */
        input.keydown(selectResult);
        input.keyup(typing);
        input.blur(blur);
        input.focus(showResultContainer);

        function blur(){
            clearTimeout(timer);
            hideResultContainer();            
            if($(this).val() !== ""){                                       
                if(isDefined(that.blur)){
                    that.blur(resultContainer.find(".result:eq(0)"));                
                } 
                $(this).val("");
                resultContainer.empty();             
            }
        }

        /**
         * @event AutocompletionHelper#selectResult
         * @param  {Object} [event] Mousedown event
         * @description Select a result manually (keyboard)
         */
        function selectResult(event){
            isCancel = false;   
            var results = resultContainer.find(".result");
            var resultSelected = resultContainer.find(".result.selected");
            var value = $(this).val();
            if(results.length !== 0){
                switch(event.keyCode){
                    /** prev */
                    case 38 :
                        isCancel = true;
                        changeResult("prev");
                        break;
                    /** next */
                    case 40 :
                        isCancel = true;
                        changeResult("next");
                        break;
                    /** select */
                    case 13 :
                        if(resultSelected.length !== 0){
                            isCancel = true; 
                            resultSelected.mousedown();
                        }
                        break;
                }
                if(isCancel){
                    event.preventDefault();
                    event.stopPropagation();
                    return false;
                }
            }

            if(!that.restrict){
                if (event.keyCode === 13 &amp;&amp; value !== "") {
                    that.select($("&lt;div>"+value+"&lt;/div>"), that.container);
                    $(this).val("");
                    resultContainer.hide().empty();
                    event.preventDefault();
                    event.stopPropagation();
                    return false;
                }
            }

            /**
             * @method AutocompletionHelper#changeResult
             * @private
             * @param  {String} [direction] Direction to next selection
             * @description Change result selection manually
             */
            function changeResult(direction){
                var newResult;
                if(resultSelected.length === 0){
                    newResult = resultContainer.find(".result:"+((direction === "prev") ? "last" : "first"));
                }else{
                    newResult = resultSelected[direction]();
                }
                if(newResult.length > 0){
                    resultSelected.removeClass("selected");
                    newResult.addClass("selected");
                }

            }
        }

        /**
         * @event AutocompletionHelper#typing
         * @description Send input val on typing to autocomplete
         */
        function typing(event){
            if(!isAvailable || isCancel || event.keyCode === 37 || event.keyCode === 39){
                return false;
            }

            if(input.val() === ""){
                clearTimeout(timer);
                resultContainer.fadeOut(that._fadeSpeed, resultContainer.empty);
                return false;
            }
            
            clearTimeout(timer);
            timer = setTimeout(typingTimeout, that._typingSpeed);

            /**
             * @method AutocompletionHelper#typingTimeout
             * @private
             * @description Send val to search on timeout
             */
            function typingTimeout(){
                isAvailable = false;
              //  searchIcon.removeClass("icon-search").addClass("icon-loading");
                resultContainer.empty();
                that.find(input.val(), updateResultContainer, that.container);

                /**
                 * @method  AutocompletionHelper#updateResultContainer
                 * @private
                 * @description Fill in the result container with data
                 * @param  {Array} [data] HTML content list 
                 */
                function updateResultContainer(data){
                    data.forEach(addResult);

                    /**
                     * @method AutocompletionHelper#addResult
                     * @private
                     * @description Add a result in the result container
                     */
                    function addResult(element){
                        var result = $(element);

                        result.mouseenter(removeSelected);
                        result.mousedown(selectElement);
                        resultContainer.append(result);

                        function selectElement() {
                            that.select($(this), that.container);
                            input.val("");
                            resultContainer.hide().empty();
                        }

                        /**
                         * @event AutocompletionHelper#removeSelected
                         * @description Remove manual selection
                         */
                        function removeSelected(){
                            resultContainer.find(".selected").removeClass("selected");
                        }
                        
                    }

                    if(data.length > 0 &amp;&amp; input.val() !== ""){
                        /** show result container */
                        resultContainer.fadeIn(that._fadeSpeed);
                    }else{
                        hideResultContainer();
                    }
                  //  searchIcon.removeClass("icon-loading").addClass("icon-search");
                    isAvailable = true;
                }
            }

        }

        /**
         * @event AutocompletionHelper#hideResultContainer
         * @description Fade out result container on input blur
         */
        function hideResultContainer(){
            resultContainer.fadeOut(that._fadeSpeed);
        };

        /**
         * @event AutocompletionHelper#showResultContainer
         * @description Fade in result container on input focus
         */
        function showResultContainer(){
            if(resultContainer.find(".result").length > 0 &amp;&amp; input.val() !== ""){
                resultContainer.fadeIn(that._fadeSpeed);
            }
        }        
    };
})();</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 16 2018 15:21:10 GMT+0100 (CET)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>